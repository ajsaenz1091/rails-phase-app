(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(22),a=n.n(s),o=(n(54),n(13)),i=(n(55),n(56),n(18)),j=n(16),l=n(1),b=function(e){var t=e.errors;return Object(l.jsx)("div",{children:t.map((function(e){return Object(l.jsx)("p",{children:Object(l.jsx)("ol",{children:e})})}))})},u=function(e){var t=e.handleUserLoginAndSignup,n=e.errors,c=Object(r.useState)({}),s=Object(o.a)(c,2),a=s[0],u=s[1],d=function(e){u(Object(j.a)(Object(j.a)({},a),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),Object(l.jsx)("h5",{children:"Become a member of our community!"}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)};fetch("/users",n).then((function(e){return e.json()})).then((function(e){return t(e)}))},children:[Object(l.jsx)("input",{onChange:d,name:"username",type:"text",placeholder:"username"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{onChange:d,name:"password",type:"password",placeholder:"password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{onChange:d,name:"password_confirmation",type:"password",placeholder:"password confirmation"}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Signup"})]}),Object(l.jsx)("br",{}),Object(l.jsx)(b,{errors:n}),Object(l.jsx)("p",{children:"Members who sign up will have ability to create and edit their own blogs."})]})},d=n(76),h=n(45),O=function(e){var t=e.post,n=e.setPosts,c=e.posts,s=e.setState,a=e.blogTab,b=e.editTab,u=t.id,O=Object(r.useState)({title:t.title,content:t.content}),p=Object(o.a)(O,2),x=p[0],f=p[1],m=function(e){f(Object(j.a)(Object(j.a)({},x),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(l.jsx)("div",{children:Object(l.jsxs)(d.a,{onSubmit:function(e){e.preventDefault();var t={method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(x)};fetch("/posts/".concat(u),t).then((function(e){return e.json()})).then((function(e){e.error||n(c.map((function(t){return t.id===u?e.post:t})))})),a.current.className="nav-link active",b.current.className="nav-link",s("#first")},children:[Object(l.jsxs)(d.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(l.jsx)(d.a.Label,{children:"Blog title"}),Object(l.jsx)(d.a.Control,{onChange:m,value:x.title,name:"title",type:"text",placeholder:"Blog subject"})]}),Object(l.jsxs)(d.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(l.jsx)(d.a.Label,{children:"Blog Content"}),Object(l.jsx)(d.a.Control,{onChange:m,value:x.content,name:"content",type:"text",as:"textarea",rows:3})]}),Object(l.jsx)(h.a,{type:"submit",variant:"outline-primary",size:"sm",children:"Update post"})]})})},p=n(78),x=function(e){var t=e.post,n=e.handleDeletePost,r=e.errors;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p.a.Title,{children:t.title}),Object(l.jsx)(p.a.Text,{children:t.content}),Object(l.jsxs)(p.a.Text,{children:["Posted by: ",t.user.username," on ",t.created_at]}),Object(l.jsx)(h.a,{onClick:n,variant:"primary",children:"Delete post"}),Object(l.jsx)(b,{errors:r})]})},f=n(77),m=function(e){var t=e.errors,n=e.post,s=e.setPosts,a=e.posts,i=(e.key,n.id),j=Object(r.useState)("#first"),b=Object(o.a)(j,2),u=b[0],d=b[1],h=c.a.createRef(),m=c.a.createRef(),g=function(){fetch("/posts/".concat(i),{method:"DELETE"}).then((function(e){e.ok&&s(a.filter((function(e){return e.id!==i})))}))},v=function(e){console.log(e.target),e.target.href.includes("#link")&&(h.current.className="nav-link",m.current.className="nav-link active"),d(e.target.href)};return Object(l.jsxs)(p.a,{id:n.id,className:"post-card",border:"dark",bg:"light",children:[Object(l.jsx)(p.a.Header,{children:Object(l.jsxs)(f.a,{variant:"tabs",defaultActiveKey:u,children:[Object(l.jsx)(f.a.Item,{children:Object(l.jsx)(f.a.Link,{class:"nav-link active",ref:h,onClick:v,href:"#first",children:"Blog post"})}),Object(l.jsx)(f.a.Item,{children:Object(l.jsx)(f.a.Link,{ref:m,onClick:v,href:"#link",children:"Edit post"})}),Object(l.jsx)(f.a.Item,{children:Object(l.jsx)(f.a.Link,{onClick:v,href:"#disabled",children:"Comments"})})]})}),Object(l.jsx)(p.a.Body,{children:u.includes("#first")?Object(l.jsx)(x,{post:n,handleDeletePost:g,errors:t}):u.includes("#link")?Object(l.jsx)(O,{blogTab:h,editTab:m,handleTab:v,setState:d,post:n,setPosts:s,posts:a}):Object(l.jsx)("p",{children:"Comments section comming soon!"})})]})},g=function(e){var t=e.currentUser,n=e.errors,r=e.posts,c=e.setPosts;return Object(l.jsxs)("div",{children:[Object(l.jsx)(b,{errors:n}),Object(l.jsx)("p",{children:"home page"}),r.map((function(e){return Object(l.jsx)(m,{post:e,setPosts:c,posts:r,errors:n,currentUser:t},e.id)})),Object(l.jsx)("br",{})]})},v=function(e){var t=e.handleUserLoginAndSignup,n=e.errors,c=Object(r.useState)({}),s=Object(o.a)(c,2),a=s[0],u=s[1],d=function(e){u(Object(j.a)(Object(j.a)({},a),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),Object(l.jsx)("h5",{children:"Member sign in."}),Object(l.jsx)("p",{children:"Already a member?  Please sign in below."}),Object(l.jsx)("br",{}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)};fetch("/login",n).then((function(e){return e.json()})).then((function(e){return t(e)}))},children:[Object(l.jsx)("input",{onChange:d,name:"username",type:"text",placeholder:"username"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{onChange:d,name:"password",type:"password",placeholder:"password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Login"})]}),Object(l.jsx)("br",{}),Object(l.jsx)(b,{errors:n})]})},y=n(8),C=function(e){var t=e.setCurrentUser,n=Object(y.f)();Object(r.useEffect)((function(){fetch("/logout",{method:"DELETE"}),c()}));var c=function(){t(null),setTimeout((function(){n.push("/login")}),2e3)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),Object(l.jsx)("h1",{children:"Logging out..."})]})},S=n(49),k=function(e){var t=e.handleUserLoginAndSignup,n=e.errors,c=e.setPosts,s=e.posts,a=Object(r.useState)({}),u=Object(o.a)(a,2),d=u[0],h=u[1],O=function(e){h(Object(j.a)(Object(j.a)({},d),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)};fetch("/posts",n).then((function(e){return e.json()})).then((function(e){e.error||(t(e),c([e.post].concat(Object(S.a)(s))))}))},children:[Object(l.jsx)("label",{for:"title",children:"Blog Title:"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{onChange:O,type:"text",id:"title",name:"title"}),Object(l.jsx)("br",{}),Object(l.jsx)("label",{for:"content",children:"Content:"}),Object(l.jsx)("br",{}),Object(l.jsx)("textarea",{onChange:O,type:"text",id:"content",name:"content"}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"Submit"})]}),Object(l.jsx)("br",{}),Object(l.jsx)(b,{errors:n})]})},T=n(75),L=n(73),w=n(74),P=function(e){var t=e.currentUser;return Object(l.jsx)("div",{children:Object(l.jsx)(T.a,{variant:"dark",bg:"dark",expand:"lg",children:Object(l.jsxs)(L.a,{fluid:!0,children:[Object(l.jsx)(T.a.Brand,{href:"/home",children:"Blog App"}),Object(l.jsx)(T.a.Toggle,{"aria-controls":"navbar-dark-example"}),Object(l.jsx)(T.a.Collapse,{id:"navbar-dark-example",children:Object(l.jsx)(f.a,{children:Object(l.jsxs)(w.a,{id:"nav-dropdown-dark-example",title:"Menu",menuVariant:"dark",children:[Object(l.jsx)(w.a.Item,{href:"/signup",children:"Sign Up"}),Object(l.jsx)(w.a.Item,{href:"/login",children:"Login"}),Object(l.jsx)(w.a.Item,{href:"/newpost",children:"Create Post"}),Object(l.jsx)(w.a.Divider,{}),Object(l.jsx)(w.a.Item,{href:"/logout",children:"Log Out"})]})})}),Object(l.jsx)(T.a.Collapse,{className:"justify-content-end",children:Object(l.jsxs)(T.a.Text,{children:["Signed in as: ",Object(l.jsx)("a",{href:"/home",children:t?"".concat(t.username):"Not Signed In"})]})})]})})})},U=function(){var e=Object(y.f)(),t=Object(r.useState)(null),n=Object(o.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)([]),i=Object(o.a)(a,2),j=i[0],b=i[1],d=Object(r.useState)([]),h=Object(o.a)(d,2),p=h[0],x=h[1],f=function(t){t.errors?b(t.errors):s(t.user),t.errors||(e.push("/home"),b([]))};return Object(r.useEffect)((function(){fetch("/posts").then((function(e){return e.json()})).then((function(e){console.log(e),x(e)})),fetch("/me").then((function(e){return e.json()})).then((function(e){return s(e.user)}))}),[]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(P,{currentUser:c}),Object(l.jsx)("h1",{children:c?"Welcome back ".concat(c.username,"!"):null}),Object(l.jsxs)(y.c,{children:[Object(l.jsx)(y.a,{exact:!0,path:"/home",children:Object(l.jsx)(g,{errors:j,currentUser:c,posts:p,setPosts:x})}),Object(l.jsx)(y.a,{exact:!0,path:"/signup",children:Object(l.jsx)(u,{handleUserLoginAndSignup:f,errors:j})}),Object(l.jsx)(y.a,{exact:!0,path:"/login",children:Object(l.jsx)(v,{handleUserLoginAndSignup:f,errors:j})}),Object(l.jsx)(y.a,{exact:!0,path:"/logout",children:Object(l.jsx)(C,{setCurrentUser:s})}),Object(l.jsx)(y.a,{exact:!0,path:"/newpost",children:Object(l.jsx)(k,{setCurrentUser:s,handleUserLoginAndSignup:f,errors:j,setPosts:x,posts:p})}),Object(l.jsx)(y.a,{exact:!0,path:"/editpost",children:Object(l.jsx)(O,{setCurrentUser:s,handleUserLoginAndSignup:f,errors:j})})]})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},N=n(32);a.a.render(Object(l.jsx)(N.a,{children:Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(U,{})})}),document.getElementById("root")),A()}},[[68,1,2]]]);
//# sourceMappingURL=main.96191c8d.chunk.js.map